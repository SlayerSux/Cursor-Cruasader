<!DOCTYPE html>

<html>
    <head>
        <title>Cursor Crusader</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>
    <body style="margin:0; padding:0; background:black;">
        <canvas id="canvas" width="1200" height="700" style="border:1px solid white;" tabindex="1"></canvas>

        <script>
            /*
             *from 10/15/2025 to 10/25/2025 
             *I worked on getting all together and getting button and dot classes working and have attacks working
             *Also got the arena to show up
             */
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var mouseXPos = 0;
            var mouseYPos = 0;
            var mouseLeftDown = false;
            var playerMaxHealth = 10;
            var playerHealth = 10;
            var shards = 0;
            var prestigePoints = 0;
            var prestiged = false;
            var wave = 1;
            var waveBudget = 5;        // how many total weight points the wave can spawn
            var waveInProgress = false;
            var waveCooldown = 2000;   // ms between waves
            var lastWaveEnd = 0;

            var gameScreen = "menu";
            var highestWave = 1;
            var selectedWave = 1;
            // arena init
            var arenaX = 275;
            var arenaY = 25;
            var arenaSize = 650;
            var arenaOpen = false;
            //enemies init
            var enemies = [];
            var enemyProjectiles = [];
            var lastEnemySpawn = 0;
            var enemySpawnInterval = 5000; // 10 seconds
            var playerHitInterval = 1000;

            // === UPGRADE VALUES ===
            var damageLevel = 0;
            var healthLevel = 0;
            var speedLevel = 0;
            var rangeLevel = 0;
            var sizeLevel = 0;

            // Base costs
            var speedCost = 5;
            var rangeCost = 5;
            var sizeCost = 5;
            var damageCost = 10;
            var healthCost = 10;



            // Dot class
            class Dot {
                constructor(x, y, radius, colour, arenaX, arenaY, arenaSize) {
                    this.x = x;
                    this.y = y;
                    this.radius = radius;
                    this.colour = colour;
                    this.arenaX = arenaX;
                    this.arenaY = arenaY;
                    this.arenaSize = arenaSize;
                    this.targetX = x;
                    this.targetY = y;
                    this.ease = 0.01;
                    this.baseEase = this.ease;
                    this.baseRadius = this.radius;
                    this.baseAttackMaxRadius = this.attackMaxRadius;

                    this.attackHitSet = new Set();

                    this.isAttacking = false;
                    this.attackRadius = 0;
                    this.attackMaxRadius = this.radius * (5 / 3);
                    this.attackColour = "yellow";
                    this.attackDamage = 1;
                    this.hasHitThisClick = false;



                }

                setTarget(x, y) {
                    this.targetX = x;
                    this.targetY = y;
                }
                applyUpgrades() {
                    this.ease = this.baseEase + speedLevel * 0.003;
                    this.radius = this.baseRadius + sizeLevel * 2;
                    this.attackMaxRadius = this.radius * (5 / 3) + rangeLevel * 5;
                }

                attack() {
                    // start attack
                    this.isAttacking = true;
                    this.attackRadius = this.radius;
                    this.attackMaxRadius = this.radius * (5 / 3);
                }

                update() {
                    // move toward target
                    this.x += (this.targetX - this.x) * this.ease;
                    this.y += (this.targetY - this.y) * this.ease;

                    // keep inside arena
                    var minX = this.arenaX + this.radius;
                    var minY = this.arenaY + this.radius;
                    var maxX = this.arenaX + this.arenaSize - this.radius;
                    var maxY = this.arenaY + this.arenaSize - this.radius;

                    if (this.x < minX + this.radius / 5)
                        this.x = minX + this.radius / 5;
                    if (this.y < minY + this.radius / 5)
                        this.y = minY + this.radius / 5;
                    if (this.x > maxX - this.radius / 5)
                        this.x = maxX - this.radius / 5;
                    if (this.y > maxY - this.radius / 5)
                        this.y = maxY - this.radius / 5;

                    // handle attack growth
                    if (this.isAttacking) {
                        this.attackRadius += (this.attackMaxRadius - this.attackRadius) * 0.2;

                        if (this.attackRadius >= this.attackMaxRadius * 0.99) {
                            this.isAttacking = false;
                        }
                    }
                }

                draw(ctx) {
                    // draw the dot
                    ctx.fillStyle = this.colour;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fill();

                    // draw attack if active
                    if (this.isAttacking) {
                        ctx.strokeStyle = this.attackColour;
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.attackRadius, 0, Math.PI * 2);
                        ctx.stroke();
                    }
                }

                tryClick(mouseLeftDown) {

                    if (mouseLeftDown) { //if left mouse down then it attacks
                        this.attack();
                        this.isAttacking = true;
                        this.attackRadius = 0;
                        this.attackHitSet.clear();

                        return true;
                    }
                    return false;
                }
            }


            // Button class (simple)
            class Button { //for most of this button class https://www.youtube.com/watch?v=cGg6A-U9q3E i learned from watching this youtube video
                constructor(text, x, y, width, height, fillColour, textColour, xOffset, onClick) {
                    this.text = text;
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    this.fillColour = fillColour;
                    this.textColour = textColour;
                    this.xOffset = xOffset !== undefined ? xOffset : 0;
                    if (typeof onClick === "function") {
                        this.onClick = onClick;
                    } else {
                        this.onClick = function () { };
                    }
                    this.hover = false;
                }
                draw(ctx, mouseX, mouseY) {
                    ctx.fillStyle = this.fillColour;
                    ctx.fillRect(this.x, this.y, this.width, this.height);

                    ctx.fillStyle = this.textColour;
                    ctx.font = "25px Courier";
                    ctx.fillText(this.text, this.x + this.xOffset, this.y + this.height / 2 + 5);

                    if (mouseX > this.x && mouseX < this.x + this.width &&
                            mouseY > this.y && mouseY < this.y + this.height) {
                        this.hover = true;
                        ctx.strokeStyle = "yellow";
                        ctx.lineWidth = 3;
                        ctx.strokeRect(this.x, this.y, this.width, this.height);
                    } else {
                        this.hover = false;
                    }
                }
                handleClick(mouseX, mouseY, mouseLeftDown) {
                    if (this.hover && mouseLeftDown) {
                        this.onClick();
                        return true;
                    }
                    return false;
                }
            }
            class Enemy {
                constructor(config) {
                    this.x = config.x;
                    this.y = config.y;

                    this.size = config.size;
                    this.health = config.health;
                    this.maxHealth = config.health;

                    this.damage = config.damage;
                    this.speed = config.speed;

                    this.colour = config.colour;
                    this.bulletSpeed = config.bulletSpeed;
                    this.shootRate = config.shootRate; // frames between shots
                    this.weight = config.weight;       // wave spawn value

                    this.shardsDrop = config.shardsDrop;
                    this.shootTimer = 0;
                }

                update(targetX, targetY) {


                    // Move toward target
                    var dx = targetX - this.x;
                    var dy = targetY - this.y;
                    var dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist > 0) {
                        this.x += (dx / dist) * this.speed;
                        this.y += (dy / dist) * this.speed;
                    }


                    // Shooting  
                    this.shootTimer++;
                    if (this.shootTimer >= this.shootRate) {
                        this.shoot(targetX, targetY);
                        this.shootTimer = 0;
                    }
                }

                shoot(tx, ty) {
                    var dx = tx - this.x;
                    var dy = ty - this.y;
                    var dist = Math.sqrt(dx * dx + dy * dy);

                    var vx = 0;
                    var vy = 0;
                    if (dist > 0) {
                        vx = (dx / dist) * this.bulletSpeed;
                        vy = (dy / dist) * this.bulletSpeed;
                    }

                    enemyProjectiles[enemyProjectiles.length] = {
                        x: this.x,
                        y: this.y,
                        vx: vx,
                        vy: vy,
                        radius: 5,
                        colour: "white"
                    };
                }

                draw(ctx) {
                    ctx.fillStyle = this.colour;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();

                    // health bar
                    ctx.fillStyle = "green";
                    ctx.fillRect(
                            this.x - this.size,
                            this.y - this.size - 8,
                            (this.health / this.maxHealth) * (this.size * 2),
                            4
                            );
                }
            }
            function updateProjectiles() {
                for (var i = enemyProjectiles.length - 1; i >= 0; i--) {
                    var projectileVar = enemyProjectiles[i];
                    projectileVar.x += projectileVar.vx;
                    projectileVar.y += projectileVar.vy;
                    if (projectileVar.x < arenaX || projectileVar.x > arenaX + arenaSize || projectileVar.y < arenaY || projectileVar.y > arenaY + arenaSize) {
                        enemyProjectiles.splice(i, 1);
                        continue;
                    }
                    if (circleCollision(projectileVar.x, projectileVar.y, projectileVar.radius, dot.x, dot.y, dot.radius)) {
                        playerHealth -= 1;
                        playerHealthBar.set(playerHealth);
                        enemyProjectiles.splice(i, 1);
                        if (playerHealth <= 0) {
                            gameScreen = "lose";
                        }
                    }
                }
            }
            function circleCollision(x1, y1, r1, x2, y2, r2) {
                var dx = x2 - x1;
                var dy = y2 - y1;
                var distance = Math.sqrt(dx * dx + dy * dy);
                return distance < r1 + r2;
            }

            function drawProjectiles() {
                for (var i = 0; i < enemyProjectiles.length; i++) {
                    var projectileVar = enemyProjectiles[i];
                    ctx.fillStyle = projectileVar.colour;
                    ctx.beginPath();
                    ctx.arc(projectileVar.x, projectileVar.y, projectileVar.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            class Bar {
                constructor(x, y, width, height, maxValue, colour) {
                    this.x = x;
                    this.y = y;
                    this.w = width;
                    this.h = height;
                    this.maxValue = maxValue;
                    this.value = maxValue;
                    this.colour = colour;
                    this.borderColour = "rgba(255,255,255,0.8)";
                    this.bgColour = "rgba(0,0,0,0.3)";
                }

                set(value) {
                    this.value = Math.max(0, Math.min(value, this.maxValue));
                }

                draw(ctx) {
                    // background
                    ctx.fillStyle = this.bgColour;
                    ctx.fillRect(this.x, this.y, this.w, this.h);
                    // bar value
                    var percent = this.value / this.maxValue;
                    ctx.fillStyle = this.colour;
                    ctx.fillRect(this.x, this.y, this.w * percent, this.h);
                    // border
                    ctx.lineWidth = 3;
                    ctx.strokeStyle = this.borderColour;
                    ctx.strokeRect(this.x, this.y, this.w, this.h);
                }
            }




            // Create instances
            var dot = new Dot(600, 350, 25, "white", arenaX, arenaY, arenaSize);
            var startButton = new Button("Start", 550, 360, 100, 50, "white", "black", 10, function () {
                gameScreen = "arena1";
                updateSelectableWave();
                wave = selectedWave;
                dot.attackDamage = 1 + damageLevel;

                playerMaxHealth = 10 + healthLevel * 2;
                playerHealth = playerMaxHealth;
                playerHealthBar.maxValue = playerMaxHealth;
                playerHealthBar.set(playerHealth);

                startWave();
                arenaOpen = false;
            });
            var backButton = new Button("Back", 10, 10, 75, 25, "white", "black", 10, function () {
                gameScreen = "menu";
                arenaOpen = false;
            });
            var upgradesBackButton = new Button("Back", 10, 10, 75, 25, "white", "black", 10, function () {
                gameScreen = "mainUpgrades";
            })
            var upgradeButton = new Button("Upgrades", 540, 550, 100, 50, "white", "black", 10, function () {
                gameScreen = "mainUpgrades";
            });

            var mainHealthUpgradesButton = new Button("Health", 180, 220, 260, 90, "white", "black", 70, function () {
                gameScreen = "healthUpgrades";
            });

            var mainDamageUpgradesButton = new Button("Damage", 470, 220, 260, 90, "white", "black", 65, function () {
                gameScreen = "damageUpgrades";
            });

            var mainSpeedUpgradesButton = new Button("Speed", 760, 220, 260, 90, "white", "black", 75, function () {
                gameScreen = "speedUpgrades";
            });

            var mainRangeUpgradesButton = new Button("Range", 180, 350, 260, 90, "white", "black", 75, function () {
                gameScreen = "rangeUpgrades";
            });

            var mainSizeUpgradesButton = new Button("Size", 470, 350, 260, 90, "white", "black", 85, function () {
                gameScreen = "sizeUpgrades";
            });

            var mainPrestigeUpgradesButton = new Button("Prestige", 760, 350, 260, 90, "white", "black", 55, function () {
                gameScreen = "prestigeUpgrades";
            });
            var prestigeButton = new Button("Prestige?", 760, 350, 260, 90, "white", "black", 55, function () {
                if (totalShardsCollected >= 1000000) {
                    prestiged = true;
                }
            });


            var losePlayAgainButton = new Button("Play Again", 500, 350, 200, 60, "white", "black", 25, function () {
                restartGame();
            });
            var loseUpgradesButton = new Button("Upgrades", 500, 420, 200, 60, "white", "black", 35, function () {
                gameScreen = "mainUpgrades";
            });
            var loseSettingsButton = new Button("Settings", 500, 490, 200, 60, "white", "black", 35, function () {

            });
            var loseMenuButton = new Button("Menu", 500, 560, 200, 60, "white", "black", 55, function () {
                resetWaveState();
                gameScreen = "menu";
            });
            var waveDownButton = new Button("Wave -", 450, 470, 120, 40, "gray", "white", 20, function () {
                selectedWave--;
                updateSelectableWave();
            });

            var waveUpButton = new Button("Wave +", 600, 470, 120, 40, "gray", "white", 28, function () {
                selectedWave++;
                updateSelectableWave();
            });

            var playerHealthBar = new Bar(950, 25, 150, 10, playerMaxHealth, "green");
            function init() {
                canvas.addEventListener("mousemove", function (evt) {
                    var rect = canvas.getBoundingClientRect();
                    mouseXPos = evt.clientX - rect.left;
                    mouseYPos = evt.clientY - rect.top;
                });
                canvas.addEventListener("mousedown", function (evt) {
                    if (evt.button === 0) {
                        mouseLeftDown = true;
                    }
                });
                canvas.addEventListener("mouseup", function (evt) {
                    if (evt.button === 0) {
                        mouseLeftDown = false;
                    }
                });
                canvas.addEventListener("contextmenu", function (evt) {
                    evt.preventDefault();
                });
            }

            function solidRect(x, y, w, h, colour) {
                ctx.fillStyle = colour;
                ctx.beginPath();
                ctx.fillRect(x, y, w, h);
            }
            function drawMediumText(text, x, y, colour) {
                ctx.fillStyle = colour;
                ctx.font = "25px Courier";
                ctx.fillText(text, x, y);
            }
            function drawLargeText(text, x, y, colour) {
                ctx.fillStyle = colour;
                ctx.font = "35px Courier";
                ctx.fillText(text, x, y);
            }
            function arenaRect(x, y, width, height, colour, thickness) {
                ctx.strokeStyle = colour;
                ctx.lineWidth = thickness;
                ctx.beginPath();
                ctx.strokeRect(x, y, width, height);
                ctx.stroke();
            }
            function restartGame() {
                // Reset player
                playerHealth = playerMaxHealth;
                playerHealthBar.set(playerMaxHealth);

                // Reset arena position
                dot.x = 600;
                dot.y = 350;
                dot.setTarget(600, 350);

                // Reset enemies + bullets
                enemies = [];
                enemyProjectiles = [];


                // wave = selectedWave; (arena mode will handle this cleanly)

                waveInProgress = false;
                waveBudget = 5;
                lastWaveEnd = 0;

                gameScreen = "arena1";
            }


            function spawnEnemy(config) {
                var spawnX = arenaX + config.size + Math.random() * (arenaSize - config.size * 2);
                var spawnY = arenaY + config.size + Math.random() * (arenaSize - config.size * 2);
                config.x = spawnX;
                config.y = spawnY;
                enemies[enemies.length] = new Enemy(config);
            }
            /**
             * Initilizing enemys
             */
            var basicEnemy = {
                size: 20,
                health: 3,
                damage: 1,
                speed: 0.3,
                colour: "red",
                bulletSpeed: 2,
                shootRate: 120,
                weight: 1,
                shardsDrop: 1
            };
            var sniperEnemy = {
                size: 18,
                health: 2,
                damage: 1.5,
                speed: 0.2,
                colour: "orange",
                bulletSpeed: 3,
                shootRate: 180,
                weight: 2,
                shardsDrop: 1
            };
            var heavyEnemy = {
                size: 35,
                health: 5,
                damage: 1,
                speed: 0.1,
                colour: "blue",
                bulletSpeed: 1,
                shootRate: 150,
                weight: 3,
                shardsDrop: 2
            };
            /**
             * Start wave function 
             */
            function startWave() {
                waveInProgress = true;

                var budget = waveBudget;

                while (budget > 0) {

                    if (budget > 0) {
                        // clone so values donâ€™t overwrite        
                        if (wave < 5) {
                            budget -= basicEnemy.weight;
                            spawnEnemy(basicEnemy);



                        } else if (wave < 10) {
                            budget -= basicEnemy.weight;
                            spawnEnemy(basicEnemy);
                            budget -= sniperEnemy.weight;
                            spawnEnemy(sniperEnemy);
                        } else if (wave < 20) {
                            budget -= basicEnemy.weight;
                            spawnEnemy(basicEnemy);
                            budget -= sniperEnemy.weight;
                            spawnEnemy(sniperEnemy);
                            budget -= heavyEnemy.weight;
                            spawnEnemy(heavyEnemy);
                        } else if (wave < 50) {
                            spawnEnemy(heavyEnemy);
                            budget -= heavyEnemy.weight;
                        }

                    } else {
                        break;
                    }
                }
            }
            /**
             * reset wave state so when you lose or leave it resets to default 
             */
            function resetWaveState() {
                wave = 0;
                waveBudget = 4;
                waveInProgress = false;
                lastWaveEnd = 0;
                enemies = [];
                enemyProjectiles = [];
            }
            /**
             * sets the minimum to be at least 1 and the new highest will be 5 less than your highest
             */
            function updateSelectableWave() {
                var minAllowed = Math.max(1, highestWave - 5);
                var maxAllowed = highestWave;


                selectedWave = Math.min(Math.max(selectedWave, minAllowed), maxAllowed);
            }



            function draw() {
                var currentTime = Date.now(); //getting the time in milliseconds
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if (gameScreen === "menu") {
                    drawLargeText("Welcome to Cursor Crusader", 350, 233, "white");
                    drawMediumText("Avoid projectiles and click on the enemies", 320, 260, "white");
                    startButton.draw(ctx, mouseXPos, mouseYPos);
                    if (startButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    // Buttons for choosing wave
                    waveDownButton.draw(ctx, mouseXPos, mouseYPos);
                    waveUpButton.draw(ctx, mouseXPos, mouseYPos);
                    if (waveDownButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    if (waveUpButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    upgradeButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradeButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }


                    // Text showing the selected wave
                    ctx.fillStyle = "white";
                    ctx.font = "28px Courier";
                    ctx.fillText("Starting Wave: " + selectedWave, 460, 350);
                } else if (gameScreen === "arena1") {

                    if (!arenaOpen) {
                        arenaOpen = true;
                        // Reset arena positioning only
                        dot.x = 600;
                        dot.y = 350;
                        dot.setTarget(600, 350);
                        enemies = [];
                        enemyProjectiles = [];
                        lastEnemySpawn = Date.now();
                        // Only set wave if this is a NEW run, not a resume
                        if (gameScreen === "arena1" && waveInProgress === false && enemies.length === 0) {
                            wave = selectedWave;
                            waveBudget = 5 + (wave - 1); // ensure budget scales properly
                            lastWaveEnd = 0;
                        }
                    }




                    //Wave system
                    if (!waveInProgress && Date.now() - lastWaveEnd > waveCooldown) {
                        startWave();
                    }

                    // End wave when all enemies are dead
                    if (waveInProgress && enemies.length === 0) {
                        waveInProgress = false;
                        lastWaveEnd = Date.now();
                        wave++;
                        if (wave > highestWave) {
                            highestWave = wave;
                            updateSelectableWave();
                        }

                    }


                    dot.applyUpgrades();
                    playerHealthBar.draw(ctx);
                    // Update and draw enemies (iterate backwards so splice is safe)
                    for (var i = enemies.length - 1; i >= 0; i--) {
                        var enemyVar = enemies[i];
                        enemyVar.update(dot.x, dot.y);
                        enemyVar.draw(ctx);
                        // Damage enemy if hit by player's attack
                        // Damage enemy only once per attack animation
                        if (dot.isAttacking &&
                                !dot.attackHitSet.has(enemyVar) &&
                                circleCollision(dot.x, dot.y, dot.attackRadius, enemyVar.x, enemyVar.y, enemyVar.size)) {

                            enemyVar.health -= dot.attackDamage;
                            dot.attackHitSet.add(enemyVar); // mark as hit for this attack

                            if (enemyVar.health <= 0) {
                                var scale = Math.sqrt(wave) + (wave * 0.2);
                                shards += Math.floor(enemyVar.shardsDrop * scale);
                                enemies.splice(i, 1);
                            }

                        }

                    }


                    // Bullets
                    updateProjectiles();
                    drawProjectiles();
                    arenaRect(arenaX, arenaY, arenaSize, arenaSize, "white", 10);
                    backButton.draw(ctx, mouseXPos, mouseYPos);
                    if (backButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown))
                        mouseLeftDown = false;
                    if (dot.tryClick(mouseLeftDown))
                        mouseLeftDown = false;
                    dot.setTarget(mouseXPos, mouseYPos);
                    dot.update();
                    dot.draw(ctx);
                    drawMediumText("Shards: " + shards, 950, 200, "cyan");
                    drawMediumText("Wave: " + wave, 950, 230, "white");
                } else if (gameScreen === "lose") {
                    drawLargeText("You Lose!", 520, 250, "red");
                    losePlayAgainButton.draw(ctx, mouseXPos, mouseYPos);
                    loseUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    loseSettingsButton.draw(ctx, mouseXPos, mouseYPos);
                    loseMenuButton.draw(ctx, mouseXPos, mouseYPos);
                    if (losePlayAgainButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown))
                        mouseLeftDown = false;
                    if (loseUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown))
                        mouseLeftDown = false;
                    if (loseSettingsButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown))
                        mouseLeftDown = false;
                    if (loseMenuButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown))
                        mouseLeftDown = false;
                } else if (gameScreen === "mainUpgrades") {

                    drawLargeText("Upgrades", 520, 80, "white");
                    drawMediumText("Shards: " + shards, 520, 130, "red");

                    mainDamageUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    mainHealthUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    mainSpeedUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    mainRangeUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    mainSizeUpgradesButton.draw(ctx, mouseXPos, mouseYPos);
                    if (!prestiged) {
                        prestigeButton.draw(ctx, mouseXPos, mouseYPos);
                    } else {
                        mainPrestigeUpgradesButton.draw(ctx, mouseXPos, mouseYPos);

                    }
                    if (mainDamageUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    if (mainHealthUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    if (mainSpeedUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    if (mainRangeUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                    if (mainSizeUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }

                    if (mainPrestigeUpgradesButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                } else if (gameScreen === "healthUpgrades") {
                    drawLargeText("Health Upgrades", 450, 100, "white");
                    drawMediumText("Health Level: " + healthLevel, 450, 300, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }

                } else if (gameScreen === "damageUpgrades") {

                    drawMediumText("Damage Level: " + damageLevel, 450, 230, "white");
                    drawLargeText("Damage Upgrades", 450, 100, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                } else if (gameScreen === "speedUpgrades") {
                    drawMediumText("Speed Level: " + speedLevel, 450, 230, "white");
                    drawLargeText("Speed Upgrades", 450, 100, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                } else if (gameScreen === "rangeUpgrades") {
                    drawMediumText("Range Level: " + rangeLevel, 450, 230, "white");
                    drawLargeText("Range Upgrades", 450, 100, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                } else if (gameScreen === "sizeUpgrades") {
                    drawMediumText("Size Level: " + sizeLevel, 450, 230, "white");
                    drawLargeText("Size Upgrades", 450, 100, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                } else if (gameScreen === "prestigeUpgrades") {
                    drawMediumText("Prestige points: " + prestigePoints, 450, 230, "white");
                    drawLargeText("Prestige Upgrades", 450, 100, "white");
                    upgradesBackButton.draw(ctx, mouseXPos, mouseYPos);
                    if (upgradesBackButton.handleClick(mouseXPos, mouseYPos, mouseLeftDown)) {
                        mouseLeftDown = false;
                    }
                }






                window.requestAnimationFrame(draw);
            }

            init();
            draw();

        </script>
    </body>
</html>
